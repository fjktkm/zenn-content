---
title: "仮想化とリモート接続の 2 軸に基づく開発環境の整理"
emoji: "🛠️"
type: "idea"
topics: ["環境構築", "開発環境", "vscode", "docker", "ssh"]
published: true
---

:::message
この記事は「名工大 Advent Calendar 2025」の 21 日目の記事です．ご興味を持っていただけた方は，ぜひ以下の URL からほかの記事もご覧ください．
:::

https://qiita.com/advent-calendar/2025/nitech

## 1. はじめに

こんにちは．修士 1 年の fjktkm です．この記事では，主に名工大の学部生を念頭に，開発環境にはどのような選択肢があるのかについて紹介します．

## 2. 概念の整理

開発環境に関する用語は混乱しやすいので，まずその整理から始めます．開発環境を考える際に重要な観点として，以下の 2 点が挙げられます．

- 仮想化されているか
- 手元の計算機で実行されるか

ここでは，計算資源が仮想化されていない環境を **物理環境**，計算資源が仮想化されている環境を **仮想環境** と呼びます．また，手元の計算機で実行される環境は **ローカル環境**，手元の計算機以外で実行される環境は **リモート環境** と呼ぶことにします．

:::message
「ローカル環境」という表現は「物理環境」の意味で使用されることもありますが，この記事では上述の意味で使用します．また，「リモート環境」は「仮想環境」を含める場合もありますが，この記事では上述の意味で使用します．「仮想環境」という表現は Python の実行環境の仮想化（venv）を指して使われることもありますが，別物なのでこの記事では扱いません．このあたりの用語は厳密に運用しようと思うと本当に大変なので，どうかご容赦ください．
:::

## 3. 仮想化されているか

### 3.1. 物理環境

物理環境には Windows，macOS，Linux などがあります．はじめてプログラミングを学ぶ場合は物理環境から始めることが多いです．たとえば，手元の計算機にそのまま Java や Python をインストールしているならそれは物理環境での開発と言えます．ほかにも，情報工学科の教育用電子計算機システム CSE も物理環境であると言えます．

物理環境には次のような欠点があります．

- 複数のプロジェクトで異なるバージョンのツール・ライブラリを使うことが難しい
- ほかの開発者と同じ環境を再現するのが難しい
- 特に Windows では，そもそも開発に必要なツールが揃っていないことが多い

### 3.2. 仮想環境

このような問題を解決するため，仮想環境がよく使われます．仮想環境には WSL（Windows Subsystem for Linux），Docker，仮想マシンなどがあります．

たとえば，WSL を使うと Windows 上で Linux 環境を利用できるようになりますし，Docker を使うとプロジェクトごとに異なる環境を簡単に再現できるようになります．

https://learn.microsoft.com/ja-jp/windows/wsl/install

https://www.docker.com/ja-jp/

仮想環境にも次のような欠点があります．

- 仮想化のオーバーヘッドがあり，物理環境よりも動作が遅くなる場合がある
  - ほとんどの場合は無視できるので，基本的には気にしなくてよい
- 学習コストがかかる

とこんな感じで，物理環境と仮想環境はそれぞれ一長一短です．最近はパッケージマネージャーの機能が充実して，物理環境の欠点もある程度は解消されてきています．一般論としては，プロジェクトの規模や目的に応じて，物理環境と仮想環境を使い分けるのがよいということになるでしょう．

### 3.3. Dev Containers

Docker を使った仮想環境は基本的にデプロイを目的として使われることが多く，開発環境として使うには少し手間がかかります．そこで，Visual Studio Code では Dev Containers という仕組みが提供されています．これを使うと，Docker コンテナを開発環境として簡単に利用できるようになります．

一応内部的には Docker を使っているわけですけど，Docker を知らないと全く使えないというような性質のものでもないので，Docker より先に Dev Containers に触れるのでも全然いいんじゃないかと思います．

https://code.visualstudio.com/docs/devcontainers/containers

ちなみに，わたしはすべての開発環境を Dev Containers で構築しています．物理環境が一切汚れないので，非常に快適です．また，クラウドストレージとも相性がよいのがうれしいポイントです（語りたい気持ちは山々なのですが，長くなりすぎるのでここでは割愛します）．

## 4. 手元の計算機で実行されるか

### 4.1. ローカル環境

手元の計算機でプログラムを実行する場合，それはローカル環境での開発と言えます．たとえば，自分のノート PC 上でプログラムを実行している場合などが該当します．また，CSE も演習室で利用する場合はローカル環境であると言えます（多少の議論の余地はある）．

ローカル環境の利点には次のようなものがあります．

- ネットワーク接続が不要
- レイテンシーが低い

一方でローカル環境には次のような欠点もあります．

- 手元の計算機だとリソースが不足する場合がある
  - 機械学習で GPU をゴリゴリ使う場合など
- 環境構築に追加の手間がかかる
  - たとえば CSE ならすでに授業で使う環境は用意されている

### 4.2. リモート環境

このような問題を解決するため，リモート環境での開発がよく行われます．リモート環境で開発するためには，手元の計算機からリモートの計算機に接続する必要があります．リモート接続の方法には次のようなものがあります．

- リモートデスクトップ
- SSH 接続
- Tailscale
- Remote Tunnels

リモートデスクトップは，リモートの計算機の画面を手元の計算機に表示して操作する方法です．もっとも原始的な方法で，GUI アプリケーションなどが使える点が魅力的ですが，レイテンシーが高くなりがちで開発には向いていません．

実用的には SSH 接続などの CLI ベースの接続方法がよく使われます．以下では，代表的な CLI ベースの接続方法について説明します．

### 4.3. SSH 接続

もっとも一般的なのは SSH 接続です．SSH 接続を使うと，手元の計算機からリモートの計算機にコマンドラインで接続して操作できます．レイテンシーが低く，安定している点が魅力的です．Visual Studio Code は SSH 接続をサポートしており，ローカル環境とほとんど変わらない感覚でリモート環境を利用できます．

https://code.visualstudio.com/docs/remote/ssh

SSH 接続には次の 2 つの認証方式があります．

- パスワード認証
- 公開鍵認証

パスワード認証は簡単に使えますが，セキュリティ的にあまり望ましくありません．また，毎回パスワードを入力する必要があり面倒でもあります．これに対して，公開鍵認証はセキュリティ的に優れており，パスワードを入力する手間も省けます．**公開鍵認証を使っていない人は人生の半分を損していると言っても過言ではありません．**

SSH キーの作成と設定については，以下のドキュメントが参考になります．ChatGPT に聞いてもまともな回答が得られると思います．

https://code.visualstudio.com/docs/remote/troubleshooting#_quick-start-using-ssh-keys

### 4.4. Tailscale

自宅ネットワークやセキュリティが厳格なネットワークでは，外部から直接 SSH 接続できない場合があります．そのような場合に便利なのが Tailscale です．Tailscale は，P2P VPN サービスであり，Tailscale の VPN を介してリモートの計算機と通信できるようになります．これにより，プライベートなネットワーク内の計算機にも簡単に SSH 接続できるようになります．

https://tailscale.com/

ちなみに，名工大の学内ネットワークである MAINS では，MAINS 上で VPN を利用することが禁止されています．Tailscale は明確に VPN を使っているので NG です．**使っちゃいけませんからね！絶対に使っちゃダメなんですからね！**

:::message
念のため裏取りしとくか～って思ってさっき調べてみたんですが，明確な記述が見つけられませんでした．たしかどこかに書いてあったはずなんだけどなぁ．．．
:::

### 4.5. Remote Tunnels

さて，そんなあなたに朗報です．Visual Studio Code には Remote Tunnels という機能があり，これを使うと SSH 接続のようにリモートの計算機に接続できるようになります．しかも，内部的に P2P VPN を使わず Microsoft のサーバーを仲介して接続するため，なんと MAINS のルール上も問題ないのです．

ちなみに，Remote Tunnels にはほかにもいろいろ利点？があって，たとえば，プライベートネットワークへの接続に VPN が不要なこととか，インストールに管理者権限が不要なこととかがあります．．．

:::message
ん，なにか引っかかるって．．．？き，気のせいですよ．．．
:::

### 4.6. クラウドサービス

最近はクラウド上で編集や開発ができるサービスも充実してきています．大きく 2 つに分類できます．

- クラウドエディタ
- クラウド開発環境

クラウドエディタは，ブラウザ上でコードの編集ができるサービスです．具体的には `vscode.dev` やそれをベースにした `github.dev` があります．これらはあくまでエディタであり，コードの実行環境は提供されない点に注意が必要です．

ぶっちゃけこの 2 つはほとんど同じなのですが，強いて違いを挙げるとしたら，`github.dev` は GitHub のリポジトリのページから `.` キーを押すだけで起動できる点が便利なのに対して，`vscode.dev` はローカルのリポジトリも開ける点が便利ということくらいだと思います．

https://code.visualstudio.com/docs/setup/vscode-web

https://vscode.dev/

https://github.dev/

クラウド開発環境には，GitHub Codespaces があります．GitHub Codespaces は，ブラウザ上で仮想環境に接続して開発できるサービスです．先述した Dev Containers を利用して環境を構築できるため，ローカル環境で Dev Containers を使うのと同じ感覚で利用できます．

https://github.co.jp/features/codespaces

## 5. 応用

開発環境を考えるうえで重要な観点として，先に次の 2 点を挙げました．

- 仮想化されているか
- 手元の計算機で実行されるか

この 2 つの観点は独立した概念であり，組み合わせると次の 4 つのパターンが考えられます．

|          | ローカル環境 | リモート環境 |
| :------: | :----------: | :----------: |
| 物理環境 |      ①       |      ②       |
| 仮想環境 |      ③       |      ④       |

① ② ③ は今までに説明した通りよくあるパターンです．ここで伝えたいのは ④ のパターンも存在するんだよ，ということです．これ意外と知られていないのですが，SSH 接続した状態でさらに Dev Containers を利用することができます．まぁ，あまり使う機会はないかもしれませんが，知っておくといざというときに役立つかもしれません．

:::message
CSE では Docker が使えません．この構成が使えるとしたら研究室のサーバーくらいかなぁ～
:::

## 6. おわりに

この記事では，開発環境の選択肢について紹介しました．環境構築は面倒な作業ですが，定石を知っておくと効率的に進められるようになります．この記事が皆さんの開発環境選びの参考になれば幸いです．

## 参考文献

本文中でも紹介しましたが，Visual Studio Code のリモート開発に関するドキュメントは網羅的で充実しているので，ぜひ一度読んでみることをおすすめします．

https://code.visualstudio.com/docs/remote/remote-overview

https://code.visualstudio.com/docs/devcontainers/containers
